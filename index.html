<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <title>Template Extensions</title>
</head>
<body>
  <script type="module">
    import { render, enhance, html } from './dist/interhtml.js';

    const run = (props) => {
      console.time('enhance');
      enhance(getTemplate(props), window.container);
      console.timeEnd('enhance');
    }
    run({ count: 7 });

    function getTemplate({ count, disabled = false }) {
      return html`
        <div>
          <h1 class="${'headline' + count}">Counter</h1>
          <p> ${count}${ count } <br> left in ${count}°C${count} <br>   ${count}</p>
          lala
          ${count > 7 ? html`<div>higher baby</div>` : html`<div>${count} on the nose</div>`}
          lala
          lala
          <div>
            <button disabled="${disabled}"" onclick="${() => run({ count: count+1 })}">+</button>
            <button onclick="${() => run({ count: count-1 })}">-</button>
          </div>
          ${[1, 2].map((i) => {
            return html`<div class="c${i + count - 7}t${count}">${i + count}</div>`;
          })}
        </div>
        ${count}
      `;
    }
  </script>

  <div id="container">
    <div>
      <h1 class="headline7">Counter</h1>
      <p> 77 <br> left in 7°C7 <br>   7</p>
      lala
      <div>7 on the nose</div>
      lala
      lala
      <div>
        <button>+</button>
        <button>-</button>
      </div>
      <div class="c1t7">8</div>
      <div class="c2t7">9</div>
    </div>
    7
  </div>

<!--   <script>
  (function attachShadowRoots(root) {
    if (HTMLTemplateElement.prototype.hasOwnProperty('shadowRoot')) return;
    console.log('polyfill declarative shadow dom');

    root.querySelectorAll("template[shadowroot]").forEach(template => {
      const mode = template.getAttribute("shadowroot");
      const shadowRoot = template.parentNode.attachShadow({ mode });
      shadowRoot.appendChild(template.content);
      template.remove();
      attachShadowRoots(shadowRoot);
    });
  })(document);
  </script> -->

</body>
</html>
